<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>Effective python implementation – Evolving perceptions</title> <meta name="description" content="A space where I pen down my views and experiences"> <meta name="keywords" content="python, pip, virtualenv, virtualenvwrapper"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://127.0.0.1:4000/assets/img/logo.jpg"> <meta name="twitter:title" content="Effective python implementation"> <meta name="twitter:description" content="A brief introduction to the python ecosystem"> <meta name="twitter:site" content="@sailesh_dev"> <meta name="twitter:creator" content="@sailesh_dev"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Effective python implementation"> <meta property="og:description" content="A brief introduction to the python ecosystem"> <meta property="og:url" content="http://127.0.0.1:4000/py-implementation/"> <meta property="og:site_name" content="Evolving perceptions"> <meta property="og:image" content="http://127.0.0.1:4000/assets/img/logo.jpg"> <link rel="canonical" href="http://127.0.0.1:4000/py-implementation/"> <link href="http://127.0.0.1:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Evolving perceptions Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://127.0.0.1:4000/assets/css/main.css"> <!-- JS --> <script src="http://127.0.0.1:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://127.0.0.1:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://127.0.0.1:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://127.0.0.1:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://127.0.0.1:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://127.0.0.1:4000/favicon.png"> <link rel="shortcut icon" href="http://127.0.0.1:4000/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(http://127.0.0.1:4000/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://127.0.0.1:4000/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="http://127.0.0.1:4000/assets/img/logo.jpg" alt="Evolving perceptions photo" class="author-photo"> <h4>Evolving perceptions</h4> <p>A space where I pen down my views and experiences</p> </li> <li><a href="http://127.0.0.1:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/sailesh_dev" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://linkedin.com/in/sailesh-dev-2822b77b" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/saileshdev" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="http://127.0.0.1:4000/posts/">All Posts</a></li> <li><a href="http://127.0.0.1:4000/tags/">All Tags</a></li> </ul> </li> <li><a href="http://127.0.0.1:4000/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>Effective python implementation</h1> <h4>05 Nov 2015</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~9 minutes </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="http://127.0.0.1:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h2 id="version-perplexion">Version perplexion</h2> <p>Python 3 is a different language from Python 2. There are some subtle and some stark semantic and syntactic differences. As of today, Python 2.x is the most installed and most used version. Many mainstream and important packages/frameworks/tools/utilities/modules are not yet 100% compatible with Python 3.</p> <p>But, Python 3 is the future and is getting as well supported as Python 2 was in terms of libraries, documentation, online references and so on. Python 2 is the past, so it is going to be progressively discontinued and is already obsolete in a sense.</p> <hr> <h2 id="choice-of-vm">Choice of VM</h2> <p>The Python interpreter or the Python Virtual Machine has a number of different implementations, CPython being the main and most popularly installed implementation. CPython also acts as the reference implementation for other virtual machines.</p> <p>PyPy is Python implemented in Python, Jython is implemented in Java and runs on the Java VM and IronPython is the Python implementation for Microsoft .NET CLR.</p> <hr> <h2 id="installing-python-on-os-x-el-capitan">Installing python on OS X El Capitan</h2> <p>While Python comes pre-installed on OS X it is not recommended to use this binary for development.</p> <p><strong><em>Rules of thumb:</em></strong></p> <ol> <li>Never use the pre-installed OS X Python for development.</li> <li>Use Python with Homebrew.</li> <li>Never ever sudo pip(with this setup,ie brewed python, you’ll never have to use sudo to install any Python relative stuff. If you end up doing this, something is broken in your brewed Python installation)</li> <li>Use virtualenv / virtualenvwrapper.</li> </ol> <p><strong><em>Steps:</em></strong></p> <ol> <li>Install homebrew</li> <li>Install python2 using homebrew</li> <li>Installing virtualenv using pip globally</li> <li>Upgrade pip to latest version</li> <li>Install python3 using homebrew</li> <li>Install pythonenvwrapper globally using pip</li> <li>Create .bashrc(shell startup file) file and add ‘source /usr/local/bin/virtualenvwrapper.sh’</li> <li>Run/refresh the .bashrc file</li> <li>Create a virtualenv for python2</li> <li>Create a virtualenv for python3</li> </ol> <hr> <p>Lets briefy discuss the tools we are going to install before proceeding with the steps of installation.</p> <h2 id="homebrew">homebrew</h2> <p>Homebrew is a package manager designed for installing UNIX tools and other open-source applications on Mac OS X. It will quickly download and install them, compiling them from source.</p> <h2 id="pip">pip</h2> <p>pip is a package manager. It is a tool for installing Python packages from the Python Package Index. PyPI (which you’ll occasionally see referred to as The Cheeseshop) is a repository for open-source third-party Python packages. It’s similar to bundler in the Ruby world or NPM in the node world. Python actually has another, more primitive, package manager called easy_install, which is installed automatically when we install Python itself. pip is vastly superior to easy_install for lots of reasons, and so should generally be used instead.</p> <hr> <h2 id="virtualenv">virtualenv</h2> <p>virtualenv is a tool to keep the dependencies required by different projects in separate places, by creating virtual Python environments for them. It solves the “Project X depends on version 1.x but, Project Y needs 4.x” dilemma, and keeps the global site-packages directory clean and manageable.</p> <p>To illustrate this, let’s start by pretending virtualenv doesn’t exist. Imagine we’re going to write a Python program that needs to make HTTP requests to a remote web server. We’re going to use the Requests library, which is brilliant for that sort of thing. As we saw above, we can use pip to install Requests. But where on our computer does pip install the packages to? Here’s what happens if we try to run pip install requests:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ pip install requests
Downloading/unpacking requests
  Downloading requests-1.1.0.tar.gz (337Kb): 337Kb downloaded
  Running setup.py egg_info for package requests

Installing collected packages: requests
  Running setup.py install for requests
</code></pre></div> <p>So, we now know that we can import requests and use it in our program. The software works brilliantly, we make loads of money, and our clients are so impressed that they ask us to write another program to do something slightly different. But this time, we find a brand new feature that’s been added to requests since we wrote our first program that we really need to use in our second program. So we decide to upgrade the requests library to get the new feature: pip install –upgrade requests</p> <p>Everything seems fine, but we’ve unknowingly created a disaster! Next time we try to run it, we discover that our original program has completely stopped working and is raising errors when we try to run it. Why? Because something in the API of the requests library has changed between the previous version and the one we just upgraded to. It might only be a small change, but it means our code no longer uses the library correctly. Everything is broken!</p> <p>Sure, we could fix the code in our first program to use the new version of the requests API, but that takes time and distracts us from our new project. And, of course, a seasoned Python programmer won’t just have two projects but dozens - and each project might have dozens of dependencies! Keeping them all up-to-date and working with the same versions of every library would be a complete nightmare.</p> <p>How does virtualenv help? virtualenv solves this problem by creating a completely isolated virtual environment for each of our programs. An environment is simply a directory that contains a complete copy of everything needed to run a Python program, including a copy of the python binary itself, a copy of the entire Python standard library, a copy of the pip installer, and (crucially) a copy of the site-packages directory mentioned above. When we install a package from PyPI using the copy of pip that’s created by the virtualenv tool, it will install the package into the site-packages directory inside the virtualenv directory. We can then use it in your program just as before.</p> <h3 id="basic-usage">Basic Usage:</h3> <p>Create a virtual environment for a project:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ cd my_project_folder
$ virtualenv venv
</code></pre></div> <p>virtualenv venv will create a folder in the current directory which will contain the Python executable files, and a copy of the pip library which you can use to install other packages. The name of the virtual environment (in this case, it was venv) can be anything; omitting the name will place the files in the current directory instead.</p> <p>This creates a copy of Python in whichever directory you ran the command in, placing it in a folder named venv.</p> <p>We can also use a Python interpreter of our choice. <code class="highlighter-rouge">$ virtualenv -p /usr/bin/python2.7 venv</code> This will use the Python interpreter in /usr/bin/python2.7</p> <p>To begin using the virtual environment, it needs to be activated: <code class="highlighter-rouge">$ source venv/bin/activate</code> The name of the current virtual environment will now appear on the left of the prompt (e.g. (venv)Your-Computer:your_project UserName$) to let you know that it’s active. From now on, any package that we install using pip will be placed in the venv folder, isolated from the global Python installation.</p> <p>Install packages as usual, for example:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ pip install requests
</code></pre></div> <p>If we are done working in the virtual environment for the moment, we can deactivate it:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ deactivate
</code></pre></div> <p>This puts us back to the system’s default Python interpreter with all its installed libraries. To delete a virtual environment, just delete its folder.(In this case, it would be rm -rf venv).</p> <p>The virtualenv folder we created can reside anywhere(can even reside inside the codebase). In that case we need to remember to exclude the virtual environment folder from source control by adding it to the ignore list, ie if we using git then we need to add this virtualenv folder to the .gitignore file.</p> <h4 id="other-options">Other options:</h4> <p>Running virtualenv with the option –no-site-packages will not include the packages that are installed globally. This can be useful for keeping the package list clean in case it needs to be accessed later. [This is the default behavior for virtualenv 1.7 and later.]</p> <p>In order to keep our environment consistent, it’s a good idea to “freeze” the current state of the environment packages. To do this, run</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ pip freeze &gt; requirements.txt
</code></pre></div> <p>This will create a requirements.txt file, which contains a simple list of all the packages in the current environment, and their respective versions. We can see the list of installed packages without the requirements format using “pip list”. Later it will be easier for a different developer (or us, if we need to re-create the environment) to install the same packages using the same versions:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ pip install -r requirements.txt
</code></pre></div> <p>This can help ensure consistency across installations, across deployments, and across developers.</p> <hr> <h2 id="virtualenvwrapper">virtualenvwrapper</h2> <p>Working with multiple virtualenvs can become really cumbersome. We have to switch and rememberthe location of the virtualenv we have created. This is where virtualenvwrapper comes to place: virtualenvwrapper is a set of extensions to virtualenv tool. We can easily list, create and delete virtual environments; all of our virtual environments are organized in one place.</p> <p>We can create a new virtualenv easily:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ mkvirtualenv env1
New python executable in env1/bin/python2.7
Also creating executable in env1/bin/python
Installing setuptools, pip…done.
(env1)~ $
By default, all your virtual environments will be created under ~/.virtualenvs/ but you can change it.
</code></pre></div> <p>List all virtual environnements:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ workon
env1
env2
</code></pre></div> <p>Switch to a virtualenv:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ workon env1
</code></pre></div> <p>Deactivating is still the same:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ deactivate
</code></pre></div> <p>Delete a virtualenv:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ rmvirtualenv venv
</code></pre></div> <h3 id="other-useful-commands">Other useful commands</h3> <p><code class="highlighter-rouge">lsvirtualenv</code> List all of the environments.</p> <p><code class="highlighter-rouge">cdvirtualenv</code> Navigate into the directory of the currently activated virtual environment, so we can browse its site-packages, for example.</p> <p><code class="highlighter-rouge">cdsitepackages</code> Like the above, but directly into site-packages directory.</p> <p><code class="highlighter-rouge">lssitepackages</code> Shows contents of site-packages directory.</p> <hr> <h2 id="installation">Installation</h2> <p><strong><em>Step1:</em></strong> Lets install homebrew. Run the following command in the terminal.</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
</code></pre></div> <p><strong><em>Step2:</em></strong> Lets install python2 using homebrew</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ brew install python
</code></pre></div> <p>This will install python2 and pip(package manager). It actually installs the binary in /usr/local/Cellar/python/2.7.11/bin/python(may vary based on the latests stable version of python). /usr/local/bin/python is a symlink.</p> <p>which python /usr/local/bin/python</p> <p>which pip /usr/local/bin/pip</p> <p><strong><em>Step3:</em></strong> Lets instally virtualenv using pip globally.</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ pip install virtualenv
</code></pre></div> <p>It installs virtualenv and prompts us to upgrade pip if its not the latest stable version. You can skip the next step if you already have the latest version of pip.</p> <p><strong><em>Step4:</em></strong> Lets upgrade to the latest version of pip.</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ pip install --upgrade pip
</code></pre></div> <p><strong><em>Step5:</em></strong> Lets install python3 using homebrew</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ brew install python3
</code></pre></div> <p>This will install python3 and pip3(package manager). It actually installs the binary in /usr/local/Cellar/python/3.5.1/bin/python3(may vary based on the latests stable version of python). /usr/local/bin/python3 is a symlink.</p> <p>which python /usr/local/bin/python3</p> <p>which pip /usr/local/bin/pip3</p> <p><strong><em>Step6:</em></strong> Lets install pythonenvwrapper globally using pip</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ pip install virtualenvwrapper
</code></pre></div> <p>It will download and install virtualenvwrapper.</p> <p><strong><em>Step7:</em></strong> Lets create .bashrc(shell startup file) file and add ‘source /usr/local/bin/virtualenvwrapper.sh’</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ touch ~/.bashrc
</code></pre></div> <p>Add source /usr/local/bin/virtualenvwrapper.sh to the end of the file</p> <p><strong><em>Step9:</em></strong> Lets refresh the .bashrc file. Close the terminal and open it again OR</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ source ~/.bashrc
</code></pre></div> <p>Automatically a dir named .virtualenvs/ will be created in the home directory. This is where all the virtual envs will be created when we use the mkvirtualenv command.</p> <p><strong><em>Step9:</em></strong> Lets create a virtualenv for python2.</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ mkvirtualenv py2
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>$ which python
/Users/username/.virtualenvs/py2/bin/python
$ which pip
/Users/username/.virtualenvs/py2/bin/pip
$ python —version
Python 2.7.11
$ pip —version
pip 8.1.2 from /Users/username/.virtualenvs/py2/lib/python2.7/site-packages (python 2.7)
It creates the virtual env and automatically switches to that virtualenv.
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>$ deactivate
</code></pre></div> <p>This brings it out of the py2 virtualenv.</p> <p><strong><em>Step10:</em></strong> Lets create a virtualenv for python3.</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ mkvirtualenv -p /usr/local/bin/python3 py3
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>$ which python
/Users/username/.virtualenvs/py3/bin/python
$ which pip
/Users/username/.virtualenvs/py3/bin/pip
$ python --version
Python 3.5.1
$ pip --version
pip 8.1.2 from /Users/username/.virtualenvs/py3/lib/python3.5/site-packages (python 3.5)
</code></pre></div> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://127.0.0.1:4000/tags/#python" title="Pages tagged python" class="tag"><span class="term">python</span></a><a href="http://127.0.0.1:4000/tags/#pip" title="Pages tagged pip" class="tag"><span class="term">pip</span></a><a href="http://127.0.0.1:4000/tags/#virtualenv" title="Pages tagged virtualenv" class="tag"><span class="term">virtualenv</span></a><a href="http://127.0.0.1:4000/tags/#virtualenvwrapper" title="Pages tagged virtualenvwrapper" class="tag"><span class="term">virtualenvwrapper</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://127.0.0.1:4000/py-implementation/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=http://127.0.0.1:4000/py-implementation/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://127.0.0.1:4000/py-implementation/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="http://127.0.0.1:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/jquery.goup.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'evolvingperceptionsblog'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
